<template id="detalle-deuda-template">

    <div class="modal fade" id="detalle-deuda-modal">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">


                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title">Detalle Cuota Deuda</h4>
                    <button type="button" class="close" v-on:click="closeModal">&times;</button>
                </div>

                <!-- Modal body -->
                <div class="modal-body">
                    <div class="form-horizontal">
                        <h4>Detalle</h4>
                        <hr>
                        
                        <div class="row">
                            <div class="col-6 text-right text-dark">FechaVencimiento</div>
                            <div class="col-6 text-left">{{ formatDate(deuda.FechaVencimiento) }}</div>
                        </div>

                        <div class="row">
                            <div class="col-6 text-right text-dark">TotalImpuestoIndustriaComercio</div>
                            <div class="col-6 text-left">{{ deuda.TotalImpuestoIndustriaComercio | formatPrecio }}</div>
                        </div>

                        <div class="row">
                            <div class="col-6 text-right text-dark">ImpuestoAvisosTableros</div>
                            <div class="col-6 text-left">{{ deuda.ImpuestoAvisosTableros | formatPrecio }}</div>
                        </div>

                        <div class="row">
                            <div class="col-6 text-right text-dark">PagoUnidadesComerciales</div>
                            <div class="col-6 text-left">{{ deuda.PagoUnidadesComerciales | formatPrecio }}</div>
                        </div>

                        <div class="row">
                            <div class="col-6 text-right text-dark">SobretasaBomberil</div>
                            <div class="col-6 text-left">{{ deuda.SobretasaBomberil | formatPrecio }}</div>
                        </div>

                        <div class="row">
                            <div class="col-6 text-right text-dark">SobretasaSeguridad</div>
                            <div class="col-6 text-left">{{ deuda.SobretasaSeguridad | formatPrecio }}</div>
                        </div>

                        <div class="row">
                            <div class="col-6 text-right text-dark">TotalImpuestoCargo</div>
                            <div class="col-6 text-left">{{ deuda.TotalImpuestoCargo | formatPrecio }}</div>
                        </div>

                        <div class="row">
                            <div class="col-6 text-right text-dark">ValorExoneracionImpuesto</div>
                            <div class="col-6 text-left">{{ deuda.ValorExoneracionImpuesto | formatPrecio }}</div>
                        </div>

                        <div class="row">
                            <div class="col-6 text-right text-dark">RetencionesDelMunicipio</div>
                            <div class="col-6 text-left">{{ deuda.RetencionesDelMunicipio | formatPrecio }}</div>
                        </div>

                        <div class="row">
                            <div class="col-6 text-right text-dark">AutoretencionesDelMunicipio</div>
                            <div class="col-6 text-left">{{ deuda.AutoretencionesDelMunicipio | formatPrecio }}</div>
                        </div>

                        <div class="row">
                            <div class="col-6 text-right text-dark">AnticipoAnioAnterior</div>
                            <div class="col-6 text-left">{{ deuda.AnticipoAnioAnterior | formatPrecio }}</div>
                        </div>

                        <div class="row">
                            <div class="col-6 text-right text-dark">AnticipoAnioSiguiente</div>
                            <div class="col-6 text-left">{{ deuda.AnticipoAnioSiguiente | formatPrecio }}</div>
                        </div>

                        @*<div class="row">
                            <div class="col-6 text-right text-dark">ValorSancion</div>
                            <div class="col-6 text-left">{{ deuda.ValorSancion | formatPrecio }}</div>
                        </div>*@

                        <div class="row">
                            <div class="col-6 text-right text-dark">SaldoFavorPeriodoAnterior</div>
                            <div class="col-6 text-left">{{ deuda.SaldoFavorPeriodoAnterior | formatPrecio }}</div>
                        </div>

                        <div class="row">
                            <div class="col-6 text-right text-dark">TotalSaldoCargo</div>
                            <div class="col-6 text-left">{{ deuda.TotalSaldoCargo | formatPrecio }}</div>
                        </div>

                        <div class="row">
                            <div class="col-6 text-right text-dark">TotalSaldoFavor</div>
                            <div class="col-6 text-left">{{ deuda.TotalSaldoFavor | formatPrecio }}</div>
                        </div>

                        <div class="row">
                            <div class="col-6 text-right text-dark">InteresesMora</div>
                            <div class="col-6 text-left">{{ deuda.InteresesMora | formatPrecio }}</div>
                        </div>

                        <div class="row">
                            <div class="col-6 text-right text-dark">TOTAL DEUDA:</div>
                            <div class="col-6 text-left">{{ total | formatPrecio }}</div>
                        </div>
                    </div>

                </div>


                <!-- Modal footer -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" v-on:click="closeModal">Close</button>
                </div>

            </div>
        </div>
    </div>

</template>

<script>


    Vue.component("detalle-deuda", {
        template: "#detalle-deuda-template",
        created() {
            eventHub.$on('detalle-deuda:init', this.init)
        },
        data() {
            return {
                deuda: {},
                declaracionDeudaCuotaId: 0
            }
        },
        filters: {
            formatPrecio: function (value) {
                var precio = numeral(value).format("$0,0");
                //var precio = numeral(value).format("$0,0");
                numeral.locale("es");
                return precio;
            }
        },
        computed: {
            total() {
                return this.deuda.InteresesMora + this.deuda.TotalSaldoFavor;
            }
        },
        methods: {
            init(obj) {
                this.declaracionDeudaCuotaId = obj.DeclaracionDeudaCuotaId;
                this.getDeclaracionDeudaCuota();
                // this.deuda = obj;
                window.setTimeout(openModal("#detalle-deuda-modal"), 1000);
            },
            closeModal() {
                closeModal("#detalle-deuda-modal");
            },
            getDeclaracionDeudaCuota() {
                axios.get(`/DeclaracionDeudaCuota/FindById/${this.declaracionDeudaCuotaId}`)
                    .then(x => this.deuda = x.data)
                    .catch(e => console.error(e));
            },
            formatDate: function (value, fmt) {
                return formatoFecha(value, fmt);
            },
        }
    });

</script>